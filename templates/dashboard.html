{% extends "base.html" %}
{% block title %}Dashboard • TechCareer{% endblock %}

{% block content %}
<div class="row g-4">

  <!-- COLUNA ESQUERDA -->
  <div class="col-12 col-lg-4">
    <div class="card shadow-sm border-0">
      <div class="card-body p-4">

        <h1 class="h5 mb-1">{{ user.username }}</h1>
        <p class="text-secondary mb-3">
          Level {{ stats.level }} • Backend
        </p>

        <!-- XP -->
        <div class="mb-2 small text-secondary">XP</div>
        <div class="progress mb-2">
          <div class="progress-bar"
               style="width: {{ (stats.xp / stats.xp_max) * 100 }}%">
          </div>
        </div>

        <div class="d-flex justify-content-between small text-secondary mb-3">
          <span>{{ stats.xp }} / {{ stats.xp_max }}</span>
          <span>{{ ((stats.xp / stats.xp_max) * 100) | round(1) }}%</span>
        </div>

        <hr>

        <!-- SALÁRIO -->
        <div class="d-flex justify-content-between">
          <span class="text-secondary">Salário</span>
          <span class="fw-semibold">R$ {{ stats.salary }}</span>
        </div>

      </div>
    </div>

    <!-- DESAFIO DA SEMANA -->
    <div class="card shadow-sm border-0 mt-4">
      <div class="card-body p-4">

        <h2 class="h6 mb-3">Desafio da Semana</h2>
        <p class="text-secondary small">
          O servidor caiu em produção. O que você faz?
        </p>

        <form method="POST" action="{{ url_for('choose') }}" class="d-grid gap-2 mt-3">

          <button class="btn btn-primary"
                  name="choice"
                  value="A"
                  type="submit">
            A) Revisar logs (+XP, +Reputação, +Stress)
          </button>

          <button class="btn btn-outline-primary"
                  name="choice"
                  value="B"
                  type="submit">
            B) Reiniciar servidor (+XP, -Reputação, +Stress)
          </button>

          <button class="btn btn-outline-danger"
                  name="choice"
                  value="C"
                  type="submit">
            C) Tomar café (-XP, -Reputação, -Stress)
          </button>

        </form>

      </div>
    </div>

  </div>

  <!-- COLUNA DIREITA -->
  <div class="col-12 col-lg-8">
    <div class="card shadow-sm border-0">
      <div class="card-body p-4">

        <h2 class="h5 mb-3">Status</h2>

        <!-- REPUTAÇÃO -->
        <div class="mb-2 d-flex justify-content-between small">
          <span>Reputação</span>
          <span>{{ stats.reputation }}%</span>
        </div>
        <div class="progress mb-4">
          <div class="progress-bar"
               style="width: {{ stats.reputation }}%">
          </div>
        </div>

        <!-- STRESS -->
        <div class="mb-2 d-flex justify-content-between small">
          <span>Stress</span>
          <span>{{ stats.stress }}%</span>
        </div>
        <div class="progress">
          <div class="progress-bar bg-danger"
               style="width: {{ stats.stress }}%">
          </div>
        </div>

      </div>
    </div>
  </div>

</div>
{% endblock %}